metadata:
  name: resource-tuner
  format: "Lava-Test Test Definition 1.0"
  description: "A pinned **whitelist** test runner for `resource-tuner` that produces per-suite logs and an overall gating result for CI."
  os:
    - linux
  scope:
    - functional

params:
  BIN_NAME: ""
  TIMEOUT: "1200"

run:
  steps:
    - REPO_PATH=$PWD
    - cd Runner/suites/Performance/resource-tuner
    - RUN_OPTIONS="--all"
    - if [ -n "${BIN_NAME}" ]; then RUN_OPTIONS="--bin ${BIN_NAME}"; fi
    - ./run.sh --timeout "${TIMEOUT}" ${RUN_OPTIONS} || true
    - $REPO_PATH/Runner/utils/send-to-lava.sh resource-tuner.res || true
